<!doctype html><html lang=ja-jp dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="メディア芸術データベース(ベータ版) # https://mediaarts-db.bunka.go.jp/
メディア芸術データベース・ラボ (MADB Lab) # https://mediag.bunka.go.jp/madb_lab/
SPARQLクエリサービス データセット (Turtle, JSON-LD) GitHubリポジトリ スキーマ仕様書 Ver. 1.1 独自に定義する語彙 クラス プロパティ SPARQLクエリエディタ # Endpoint: https://mediag.bunka.go.jp/sparql クエリ集 # 全リソースを種別ごとに集計する # 1PREFIX schema: <https://schema.org/> 2PREFIX class: <https://mediaarts-db.bunka.go.jp/data/class#> 3 4SELECT 5 ?additionalType ?class ?genre (COUNT(*) AS ?count) 6WHERE { 7 ?resource a ?class; 8 schema:additionalType ?additionalType ; 9 schema:genre ?genre . 10} 11GROUP BY ?class ?additionalType ?genre 12ORDER BY ?additionalType ▶ 実行する マンガ単行本「鬼滅の刃 1 」の情報を取得する # https://mediaarts-db."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="メディア芸術データベース"><meta property="og:description" content="メディア芸術データベース(ベータ版) # https://mediaarts-db.bunka.go.jp/
メディア芸術データベース・ラボ (MADB Lab) # https://mediag.bunka.go.jp/madb_lab/
SPARQLクエリサービス データセット (Turtle, JSON-LD) GitHubリポジトリ スキーマ仕様書 Ver. 1.1 独自に定義する語彙 クラス プロパティ SPARQLクエリエディタ # Endpoint: https://mediag.bunka.go.jp/sparql クエリ集 # 全リソースを種別ごとに集計する # 1PREFIX schema: <https://schema.org/> 2PREFIX class: <https://mediaarts-db.bunka.go.jp/data/class#> 3 4SELECT 5 ?additionalType ?class ?genre (COUNT(*) AS ?count) 6WHERE { 7 ?resource a ?class; 8 schema:additionalType ?additionalType ; 9 schema:genre ?genre . 10} 11GROUP BY ?class ?additionalType ?genre 12ORDER BY ?additionalType ▶ 実行する マンガ単行本「鬼滅の刃 1 」の情報を取得する # https://mediaarts-db."><meta property="og:type" content="article"><meta property="og:url" content="https://lodc2022-culture-art.metadata.moe/docs/mediaartsdb/"><meta property="article:section" content="docs"><title>メディア芸術データベース | 文化・芸術とLOD ハンズオン</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.d2a9252a1314abcda8c9cb0a0a7d95cb478b6ca9a60573f18956a6bd4197eb1d.css integrity="sha256-0qklKhMUq82oycsKCn2Vy0eLbKmmBXPxiVamvUGX6x0=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.4a5bf6cc3be2f27ad26171a68bc3c78d02ed62b1ba3f3bf14191d7f95ae2e0f4.js integrity="sha256-Slv2zDvi8nrSYXGmi8PHjQLtYrG6PzvxQZHX+Vri4PQ=" crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@triply/yasgui@4.2.27/build/yasgui.min.css><script src=https://cdn.jsdelivr.net/npm/@triply/yasgui@4.2.27/build/yasgui.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/codemirror@5.65.8/theme/dracula.css><script>const yasgui={};function setYasguiQuery(e,t,n,s){let i=yasgui[e],o=i.getTab(t);o||(o=i.addTab(!0,{...Yasgui.Tab.getDefaults(),requestConfig:s?{endpoint:s}:i.config.requestConfig,name:t,id:t}));try{o.setQuery(n)}catch{o.close(),o=i.addTab(!0,{...Yasgui.Tab.getDefaults(),requestConfig:s?{endpoint:s}:i.config.requestConfig,name:t,id:t})}o.yasqe.query()}</script><style>.yasr table.dataTable{max-width:100%}.yasr table.dataTable tbody td{padding:2px 4px;font-size:90%}</style></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>文化・芸術とLOD ハンズオン</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/start/>はじめに</a></li><li><a href=/docs/mediaartsdb/ class=active>メディア芸術データベース</a></li><li><a href=/docs/wikidata/>Wikidata</a></li><li><a href=/docs/federated_query/>複数エンドポイントの横断的活用</a></li><li><a href=/docs/useful-datasets/>SPARQLエンドポイントリスト</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>メディア芸術データベース</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#メディア芸術データベースラボ-madb-lab>メディア芸術データベース・ラボ (MADB Lab)</a></li><li><a href=#query-editor>SPARQLクエリエディタ</a></li><li><a href=#queries>クエリ集</a><ul><li><a href=#aggregate-by-genre>全リソースを種別ごとに集計する</a></li><li><a href=#manga-book>マンガ単行本「鬼滅の刃 1 」の情報を取得する</a></li><li><a href=#manga-book-list>マンガ単行本の一覧を取得する</a></li><li><a href=#manga-book-and-provider>マンガ単行本とその所蔵館の一覧を取得する</a></li><li><a href=#magazine-has-part>マンガ雑誌単号の掲載内容を取得する</a></li><li><a href=#contains-magical-girl>「魔法少女」を含むタイトルを検索する</a></li><li><a href=#contains-mario>「マリオ」が登場する作品のゲームパッケージ</a></li><li><a href=#aggregate-manga-magazine-publisher>発行者毎にマンガ雑誌単号の数を集計する</a></li><li><a href=#aggregate-game-platform>ゲームプラットフォーム毎にゲームパッケージ数を集計する</a></li><li><a href=#aggregate-anime-tv-series>公開年毎にTVアニメシリーズ数を集計する</a></li><li><a href=#anime-tv-series-title-contains-marks>タイトルに「!」「?」を多く含むTVアニメシリーズを取得する</a></li><li><a href=#anime-character-name-title>登場キャラクター名がタイトルであるアニメ</a></li><li><a href=#anime-staff-name>新海誠さんの参加作品を取得する</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=メディア芸術データベースベータ版>メディア芸術データベース(ベータ版)
<a class=anchor href=#%e3%83%a1%e3%83%87%e3%82%a3%e3%82%a2%e8%8a%b8%e8%a1%93%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%83%99%e3%83%bc%e3%82%bf%e7%89%88>#</a></h1><p><a href=https://mediaarts-db.bunka.go.jp/>https://mediaarts-db.bunka.go.jp/</a></p><h2 id=メディア芸術データベースラボ-madb-lab>メディア芸術データベース・ラボ (MADB Lab)
<a class=anchor href=#%e3%83%a1%e3%83%87%e3%82%a3%e3%82%a2%e8%8a%b8%e8%a1%93%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e3%83%a9%e3%83%9c-madb-lab>#</a></h2><p><a href=https://mediag.bunka.go.jp/madb_lab/>https://mediag.bunka.go.jp/madb_lab/</a></p><ul><li><a href=https://mediag.bunka.go.jp/madb_lab/lod/sparql/>SPARQLクエリサービス</a></li><li><a href=https://mediag.bunka.go.jp/madb_lab/lod/download/>データセット (Turtle, JSON-LD)</a></li><li><a href=https://github.com/mediaarts-db/dataset>GitHubリポジトリ</a><ul><li><a href=https://github.com/mediaarts-db/dataset/blob/397b40d4e7dd35096a8c835f55f6b2406ded2315/doc/MADB%E3%83%A1%E3%82%BF%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E4%BB%95%E6%A7%98%E6%9B%B8.pdf>スキーマ仕様書 Ver. 1.1</a></li></ul></li><li>独自に定義する語彙<ul><li><a href=https://mediaarts-db.bunka.go.jp/data/class>クラス</a></li><li><a href=https://mediaarts-db.bunka.go.jp/data/property>プロパティ</a></li></ul></li></ul><h2 id=query-editor>SPARQLクエリエディタ
<a class=anchor href=#query-editor>#</a></h2><div><p>Endpoint: <code>https://mediag.bunka.go.jp/sparql</code></p><div id=yasgui-madb-lod></div></div><script>yasgui["madb-lod"]=new Yasgui(document.getElementById("yasgui-madb-lod"),{requestConfig:{endpoint:"https://mediag.bunka.go.jp/sparql"},persistenceId:"madb-lod",autofocus:!1,copyEndpointOnNewTab:!1,yasqe:{theme:"dracula",value:`PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX class:    \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e
PREFIX ma:       \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e
SELECT * WHERE {
  ?sub ?pred ?obj .
} LIMIT 10`}})</script><style>#yasgui-madb-lod .yasgui .autocompleteWrapper{display:none!important}</style><hr><h2 id=queries>クエリ集
<a class=anchor href=#queries>#</a></h2><h3 id=aggregate-by-genre>全リソースを種別ごとに集計する
<a class=anchor href=#aggregate-by-genre>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=nv>?additionalType</span> <span class=nv>?class</span> <span class=nv>?genre</span> <span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?count</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?resource</span> <span class=k>a</span> <span class=nv>?class</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>            <span class=nn>schema</span><span class=p>:</span><span class=nt>additionalType</span> <span class=nv>?additionalType</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>            <span class=nn>schema</span><span class=p>:</span><span class=nt>genre</span> <span class=nv>?genre</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=k>GROUP BY</span> <span class=nv>?class</span> <span class=nv>?additionalType</span> <span class=nv>?genre</span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=k>ORDER BY</span> <span class=nv>?additionalType</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","全リソースを種別ごとに集計する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX class:  \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT
  ?additionalType ?class ?genre (COUNT(*) AS ?count)
WHERE {
  ?resource a ?class;
            schema:additionalType ?additionalType ;
            schema:genre ?genre .
}
GROUP BY ?class ?additionalType ?genre
ORDER BY ?additionalType`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=manga-book>マンガ単行本「鬼滅の刃 1 」の情報を取得する
<a class=anchor href=#manga-book>#</a></h3><p><a href=https://mediaarts-db.bunka.go.jp/id/M464950>https://mediaarts-db.bunka.go.jp/id/M464950</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln>1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>     <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=k>SELECT</span> <span class=o>*</span>
</span></span><span class=line><span class=ln>6</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/id/M464950&gt;</span> <span class=nv>?p</span> <span class=nv>?o</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>8</span><span class=cl><span class=p>}</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","マンガ単行本の一覧を取得する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX ma:     \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e
PREFIX class:  \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT *
WHERE {
  \u003chttps://mediaarts-db.bunka.go.jp/id/M464950\u003e ?p ?o .
}`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=manga-book-list>マンガ単行本の一覧を取得する
<a class=anchor href=#manga-book-list>#</a></h3><p>「マンガ単行本」を表すクラス <code>https://mediaarts-db.bunka.go.jp/data/class#MangaBook</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span>   <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>     <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?id</span> <span class=nv>?label</span> <span class=nv>?creator</span> <span class=nv>?datePublished</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class="line hl"><span class=ln> 9</span><span class=cl>  <span class=nv>?item</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>MangaBook</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>identifier</span> <span class=nv>?id</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?label</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>creator</span> <span class=nv>?creator</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>datePublished</span> <span class=nv>?datePublished</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=k>LIMIT</span> <span class=mi>1000</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","マンガ単行本の一覧を取得する",`PREFIX rdfs:   \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX ma:     \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e
PREFIX class:  \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT
  ?id ?label ?creator ?datePublished
WHERE {
  ?item a class:MangaBook ;
        schema:identifier ?id ;
        rdfs:label ?label ;
        schema:creator ?creator ;
        schema:datePublished ?datePublished .
}
LIMIT 1000`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=manga-book-and-provider>マンガ単行本とその所蔵館の一覧を取得する
<a class=anchor href=#manga-book-and-provider>#</a></h3><p><a href=https://mediaarts-db.bunka.go.jp/id/M464950><code>https://mediaarts-db.bunka.go.jp/id/M464950</code></a> を主語とするTurtle形式のRDFデータ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-turtle data-lang=turtle><span class=line><span class=ln> 1</span><span class=cl><span class=nv>&lt;https://mediaarts-db.bunka.go.jp/id/M464950&gt;</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w>        </span><span class=kt>a</span><span class=w>                      </span><span class=nn>class:</span><span class=nt>MangaBook</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>        </span><span class=nn>rdfs:</span><span class=nt>label</span><span class=w>             </span><span class=s>&#34;鬼滅の刃 1&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>identifier</span><span class=w>      </span><span class=s>&#34;M464950&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>additionalType</span><span class=w>  </span><span class=nn>class:</span><span class=nt>CM</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>genre</span><span class=w>           </span><span class=s>&#34;マンガ単行本&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>        </span><span class=nn>dcterms:</span><span class=nt>creator</span><span class=w>        </span><span class=nv>&lt;https://mediaarts-db.bunka.go.jp/id/C53400&gt;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>        </span><span class=nn>dcterms:</span><span class=nt>publisher</span><span class=w>      </span><span class=s>&#34;P4080000000&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>        </span><span class=nn>ma:</span><span class=nt>jpno</span><span class=w>                </span><span class=s>&#34;22740403&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>        </span><span class=nn>ma:</span><span class=nt>ndc</span><span class=w>                 </span><span class=s>&#34;726.1&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>        </span><span class=nn>ma:</span><span class=nt>note</span><span class=w>                </span><span class=s>&#34;【言語】日本語　／　JPN&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>alternateName</span><span class=w>   </span><span class=s>&#34;残酷&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>brand</span><span class=w>           </span><span class=s>&#34;ジャンプコミックス&#34;</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=s>&#34;ジャンプ コミックス&#34;</span><span class=o>@</span><span class=ge>ja-Hrkt-Hrkt</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>creator</span><span class=w>         </span><span class=s>&#34;[著]吾峠呼世晴&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>datePublished</span><span class=w>   </span><span class=s>&#34;2016-06-08&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>description</span><span class=w>     </span><span class=s>&#34;残酷&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>inLanguage</span><span class=w>      </span><span class=s>&#34;日本語&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>isPartOf</span><span class=w>        </span><span class=nv>&lt;https://mediaarts-db.bunka.go.jp/id/C361806&gt;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>isbn</span><span class=w>            </span><span class=s>&#34;9784088807232&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>location</span><span class=w>        </span><span class=s>&#34;東京&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>name</span><span class=w>            </span><span class=s>&#34;キメツ ノ ヤイバ&#34;</span><span class=o>@</span><span class=ge>ja-Hrkt-Hrkt</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=s>&#34;鬼滅の刃&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>position</span><span class=w>        </span><span class=s>&#34;1.0&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>23</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>provider</span><span class=w>        </span><span class=p>[</span><span class=w> </span><span class=nn>ma:</span><span class=nt>materialIdentifier</span><span class=w>     </span><span class=nv>&lt;https://id.ndl.go.jp/bib/027321240&gt;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>24</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>note</span><span class=w>                   </span><span class=s>&#34;2016-06&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>25</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>ownerIdentifier</span><span class=w>        </span><span class=s>&#34;2&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>26</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>subMaterialIdentifier</span><span class=w>  </span><span class=s>&#34;1&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>27</span><span class=cl><span class=w>                                 </span><span class=nn>schema:</span><span class=nt>name</span><span class=w>               </span><span class=s>&#34;国立国会図書館&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>28</span><span class=cl><span class=w>                                 </span><span class=nn>schema:</span><span class=nt>price</span><span class=w>              </span><span class=s>&#34;400円&#34;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>29</span><span class=cl><span class=w>                               </span><span class=p>]</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>30</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>provider</span><span class=w>        </span><span class=p>[</span><span class=w> </span><span class=nn>ma:</span><span class=nt>materialIdentifier</span><span class=w>     </span><span class=s>&#34;10071400016547&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>31</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>note</span><span class=w>                   </span><span class=s>&#34;1刷　／　付:帯・カバー　／　付:「ジャンパラ!」(JUMP PARADISE) Vol.156&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>32</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>ownerIdentifier</span><span class=w>        </span><span class=s>&#34;6&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>33</span><span class=cl><span class=w>                                 </span><span class=nn>ma:</span><span class=nt>subMaterialIdentifier</span><span class=w>  </span><span class=s>&#34;1&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>34</span><span class=cl><span class=w>                                 </span><span class=nn>schema:</span><span class=nt>name</span><span class=w>               </span><span class=s>&#34;大阪府立中央図書館国際児童文学館&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>35</span><span class=cl><span class=w>                                 </span><span class=nn>schema:</span><span class=nt>price</span><span class=w>              </span><span class=s>&#34;400円&#34;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>36</span><span class=cl><span class=w>                               </span><span class=p>]</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>publisher</span><span class=w>       </span><span class=s>&#34;集英社　∥　シュウエイシャ&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>size</span><span class=w>            </span><span class=s>&#34;18cm　／　18cm　×　12cm&#34;</span><span class=w> </span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=w>        </span><span class=nn>schema:</span><span class=nt>volumeNumber</span><span class=w>    </span><span class=s>&#34;1&#34;</span><span class=w> </span><span class=p>.</span><span class=w>
</span></span></span></code></pre></div><p><a href=https://www.w3.org/TR/2013/REC-sparql11-query-20130321/#QSynBlankNodes>空白ノードの構文</a>を使ってパターンを指定します。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span>   <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>     <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?id</span> <span class=nv>?label</span> <span class=nv>?creator</span> <span class=nv>?datePublished</span> <span class=nv>?providerName</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=nv>?item</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>MangaBook</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>identifier</span> <span class=nv>?id</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?label</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>creator</span> <span class=nv>?creator</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>datePublished</span> <span class=nv>?datePublished</span> <span class=p>;</span>
</span></span><span class="line hl"><span class=ln>14</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>provider</span> <span class=p>[</span>
</span></span><span class="line hl"><span class=ln>15</span><span class=cl>          <span class=nn>schema</span><span class=p>:</span><span class=nt>name</span> <span class=nv>?providerName</span>
</span></span><span class="line hl"><span class=ln>16</span><span class=cl>        <span class=p>]</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=k>LIMIT</span> <span class=mi>1000</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","マンガ単行本の一覧を取得する",`PREFIX rdfs:   \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX ma:     \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e
PREFIX class:  \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT
  ?id ?label ?creator ?datePublished ?providerName
WHERE {
  ?item a class:MangaBook ;
        schema:identifier ?id ;
        rdfs:label ?label ;
        schema:creator ?creator ;
        schema:datePublished ?datePublished ;
        schema:provider [
          schema:name ?providerName
        ] .
}
LIMIT 1000`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><p>参考: <a href=https://mediag.bunka.go.jp/madb_lab/lod/usecase/case2/>MADB Lab: データ利活用例その２：マンガの連携機関所蔵リスト</a></p><h3 id=magazine-has-part>マンガ雑誌単号の掲載内容を取得する
<a class=anchor href=#magazine-has-part>#</a></h3><p><a href=https://mediaarts-db.bunka.go.jp/id/M701954>https://mediaarts-db.bunka.go.jp/id/M701954</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>xsd</span><span class=p>:</span>    <span class=nl>&lt;http://www.w3.org/2001/XMLSchema#&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span>   <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>     <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=nv>?magazineLabel</span> <span class=nv>?pageStart</span> <span class=nv>?pageEnd</span> <span class=nv>?name</span> <span class=nv>?alternativeHeadline</span> 
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/id/M701954&gt;</span> 
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?magazineLabel</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=nn>schema</span><span class=p>:</span><span class=nt>hasPart</span> <span class=nv>?part</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=nv>?part</span> <span class=nn>schema</span><span class=p>:</span><span class=nt>name</span> <span class=nv>?name</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>              <span class=nn>schema</span><span class=p>:</span><span class=nt>pageStart</span> <span class=nv>?pageStart</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>              <span class=nn>schema</span><span class=p>:</span><span class=nt>pageEnd</span> <span class=nv>?pageEnd</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>              <span class=nn>ma</span><span class=p>:</span><span class=nt>pageExclude</span> <span class=nv>?pageExclude</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=k>OPTIONAL</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>          <span class=nv>?part</span> <span class=nn>schema</span><span class=p>:</span><span class=nt>alternativeHeadline</span> <span class=nv>?alternativeHeadline</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>21</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=k>ORDER BY</span> <span class=nn>xsd</span><span class=p>:</span><span class=nt>float</span><span class=p>(</span><span class=nv>?pageStart</span><span class=p>)</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","マンガ雑誌単号の掲載内容を取得する",`PREFIX xsd:    \u003chttp://www.w3.org/2001/XMLSchema#\u003e
PREFIX rdfs:   \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX ma:     \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e
PREFIX class:  \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT
  ?magazineLabel ?pageStart ?pageEnd ?name ?alternativeHeadline 
WHERE {
  \u003chttps://mediaarts-db.bunka.go.jp/id/M701954\u003e 
        rdfs:label ?magazineLabel ;
        schema:hasPart ?part .
        
        ?part schema:name ?name ;
              schema:pageStart ?pageStart ;
              schema:pageEnd ?pageEnd ;
              ma:pageExclude ?pageExclude .
        OPTIONAL {
          ?part schema:alternativeHeadline ?alternativeHeadline .
        }
}
ORDER BY xsd:float(?pageStart)`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=contains-magical-girl>「魔法少女」を含むタイトルを検索する
<a class=anchor href=#contains-magical-girl>#</a></h3><p><code>CONTAINS</code> 関数を使って、文字列の部分一致を条件に指定します。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span>     <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span>   <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>    <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=k>SELECT</span> <span class=o>*</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?s</span> <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?label</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>     <span class=nn>schema</span><span class=p>:</span><span class=nt>genre</span> <span class=nv>?genre</span> <span class=p>.</span>
</span></span><span class="line hl"><span class=ln> 9</span><span class=cl>  <span class=k>FILTER</span> <span class=nf>CONTAINS</span><span class=p>(</span><span class=nv>?label</span><span class=p>,</span> <span class=s>&#34;魔法少女&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=k>LIMIT</span> <span class=mi>100</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","「魔法少女」を含むタイトルを検索する",`PREFIX rdfs:     \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX schema:   \u003chttps://schema.org/\u003e
PREFIX class:    \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT *
WHERE {
  ?s rdfs:label ?label ;
     schema:genre ?genre .
  FILTER CONTAINS(?label, \u0022魔法少女\u0022)
}
LIMIT 100`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=contains-mario>「マリオ」が登場する作品のゲームパッケージ
<a class=anchor href=#contains-mario>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span>   <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span>     <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>    <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>       <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span> <span class=nv>?gamePackage</span> <span class=nv>?gamePackageLabel</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=nv>?gamePackage</span> <span class=nn>ma</span><span class=p>:</span><span class=nt>embodimentOf</span> <span class=nv>?gameVariation</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>                    <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?gamePackageLabel</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=nv>?gameVariation</span> <span class=nn>ma</span><span class=p>:</span><span class=nt>variationOf</span> <span class=nv>?gameWork</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=nv>?gameWork</span> <span class=nn>schema</span><span class=p>:</span><span class=nt>character</span> <span class=nv>?character</span> <span class=p>.</span>
</span></span><span class="line hl"><span class=ln>12</span><span class=cl>  <span class=k>FILTER</span> <span class=p>(</span><span class=nf>CONTAINS</span><span class=p>(</span><span class=nv>?character</span><span class=p>,</span> <span class=s>&#34;マリオ&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","「マリオ」が登場する作品のゲームパッケージ",`PREFIX schema:   \u003chttps://schema.org/\u003e
PREFIX rdfs:     \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class:    \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e
PREFIX ma:       \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e

SELECT ?gamePackage ?gamePackageLabel
WHERE {
  ?gamePackage ma:embodimentOf ?gameVariation ;
                    rdfs:label ?gamePackageLabel .
  ?gameVariation ma:variationOf ?gameWork .
  ?gameWork schema:character ?character .
  FILTER (CONTAINS(?character, \u0022マリオ\u0022))
}`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=aggregate-manga-magazine-publisher>発行者毎にマンガ雑誌単号の数を集計する
<a class=anchor href=#aggregate-manga-magazine-publisher>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span>   <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span>    <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>ma</span><span class=p>:</span>       <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/property#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=k>SELECT</span> <span class=nv>?publisher</span> <span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?count</span><span class=p>)</span>  <span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=nv>?アイテム</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>MangaMagazineIssue</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>     <span class=nn>schema</span><span class=p>:</span><span class=nt>publisher</span> <span class=nv>?publisher</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=p>}</span>
</span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=k>GROUP BY</span> <span class=nv>?publisher</span>
</span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=k>HAVING</span> <span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=k>ORDER BY</span> <span class=k>DESC</span><span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>))</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","発行者毎にマンガ雑誌単号の数を集計する",`PREFIX schema:   \u003chttps://schema.org/\u003e
PREFIX class:    \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e
PREFIX ma:       \u003chttps://mediaarts-db.bunka.go.jp/data/property#\u003e

SELECT ?publisher (COUNT(*) AS ?count)  WHERE {
  ?アイテム a class:MangaMagazineIssue ;
     schema:publisher ?publisher
}
GROUP BY ?publisher
HAVING (COUNT(*) \u003e= 100)
ORDER BY DESC(COUNT(*))`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=aggregate-game-platform>ゲームプラットフォーム毎にゲームパッケージ数を集計する
<a class=anchor href=#aggregate-game-platform>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdf</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span> <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span> <span class=nv>?platform</span> <span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?count</span><span class=p>)</span>  <span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?s</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>GamePackage</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>     <span class=nn>schema</span><span class=p>:</span><span class=nt>gamePlatform</span> <span class=nv>?platform</span> <span class=p>.</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=k>GROUP BY</span> <span class=nv>?platform</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=k>ORDER BY</span> <span class=k>DESC</span><span class=p>(</span><span class=nv>?count</span><span class=p>)</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","ゲームプラットフォーム毎にゲームパッケージ数を集計する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class: \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT ?platform (COUNT(*) AS ?count)  WHERE {
  ?s a class:GamePackage ;
     schema:gamePlatform ?platform .
}
GROUP BY ?platform
ORDER BY DESC(?count)`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=aggregate-anime-tv-series>公開年毎にTVアニメシリーズ数を集計する
<a class=anchor href=#aggregate-anime-tv-series>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdf</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span> <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span> <span class=nv>?y</span> <span class=p>(</span><span class=nf>COUNT</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=o>*</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?count</span><span class=p>)</span>  <span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?s</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVRegularSeries</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>     <span class=nn>schema</span><span class=p>:</span><span class=nt>datePublished</span> <span class=nv>?datePublished</span> <span class=p>.</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=k>GROUP BY</span> <span class=p>(</span><span class=nf>SUBSTR</span><span class=p>(</span><span class=nv>?datePublished</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?y</span><span class=p>)</span>
</span></span><span class=line><span class=ln>11</span><span class=cl><span class=k>ORDER BY</span> <span class=k>ASC</span><span class=p>(</span><span class=nv>?y</span><span class=p>)</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","公開年毎にTVアニメシリーズ数を集計する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class: \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT ?y (COUNT(DISTINCT *) AS ?count)  WHERE {
  ?s a class:AnimationTVRegularSeries ;
     schema:datePublished ?datePublished .
}
GROUP BY (SUBSTR(?datePublished, 1, 4) AS ?y)
ORDER BY ASC(?y)`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=anime-tv-series-title-contains-marks>タイトルに「!」「?」を多く含むTVアニメシリーズを取得する
<a class=anchor href=#anime-tv-series-title-contains-marks>#</a></h3><p><code>REGEX</code> 関数を使って正規表現パターンに一致する文字列を検索します。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdf</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span> <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span> <span class=nv>?name</span> <span class=nv>?mark</span> <span class=p>(</span><span class=nf>STRLEN</span><span class=p>(</span><span class=nv>?mark</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?length</span><span class=p>)</span> <span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nv>?s</span> <span class=k>a</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVRegularSeries</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>     <span class=nn>rdfs</span><span class=p>:</span><span class=nt>label</span> <span class=nv>?name</span> <span class=p>.</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=k>FILTER</span><span class=p>(</span><span class=nf>LANG</span><span class=p>(</span><span class=nv>?name</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=k>FILTER</span> <span class=p>(</span><span class=nf>REGEX</span><span class=p>(</span><span class=nv>?name</span><span class=p>,</span> <span class=s>&#34;[!！\</span><span class=se>\</span><span class=s>?？]+&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=c># 記号部分を抽出</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=k>BIND</span> <span class=p>(</span><span class=nf>REPLACE</span><span class=p>(</span><span class=nv>?name</span><span class=p>,</span> <span class=s>&#34;[^!！\</span><span class=se>\</span><span class=s>?？]*([!！\</span><span class=se>\</span><span class=s>?？]+)[^!！\</span><span class=se>\</span><span class=s>?？]*&#34;</span><span class=p>,</span> <span class=s>&#34;$1&#34;</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?mark</span><span class=p>)</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=k>ORDER BY</span> <span class=k>DESC</span><span class=p>(</span><span class=nf>STRLEN</span><span class=p>(</span><span class=nv>?mark</span><span class=p>))</span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=k>LIMIT</span> <span class=mi>100</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","公開年毎にTVアニメシリーズ数を集計する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class: \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT ?name ?mark (STRLEN(?mark) AS ?length) WHERE {
  ?s a class:AnimationTVRegularSeries ;
     rdfs:label ?name .
  FILTER(LANG(?name) = \u0022\u0022)
  FILTER (REGEX(?name, \u0022[!！\\\\?？]\u002b\u0022))
  # 記号部分を抽出
  BIND (REPLACE(?name, \u0022[^!！\\\\?？]*([!！\\\\?？]\u002b)[^!！\\\\?？]*\u0022, \u0022\$1\u0022) AS ?mark)
}
ORDER BY DESC(STRLEN(?mark))
LIMIT 100`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><p>※ 現在『てっぺんっ!!!!!!!!!!!!!!!』という「!」を15個含むタイトルのアニメが放送されており、恐らく過去最多を更新しました。</p><h3 id=anime-character-name-title>登場キャラクター名がタイトルであるアニメ
<a class=anchor href=#anime-character-name-title>#</a></h3><p><code>schema:actor</code> の値として以下のような形式で記述されていることを利用し、正規表現を用いて検索します。</p><pre tabindex=0><code>【キャラクター名】キャスト名 ／ 【キャラクター名】キャスト名 ...
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdf</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span> <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>	<span class=nv>?series</span> <span class=nv>?genre</span> <span class=nv>?seriesName</span> <span class=nv>?actors</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=nv>?series</span> <span class=k>a</span> <span class=nv>?animeColClasses</span> <span class=p>;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>         <span class=nn>schema</span><span class=p>:</span><span class=nt>name</span> <span class=nv>?seriesName</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>         <span class=nn>schema</span><span class=p>:</span><span class=nt>genre</span> <span class=nv>?genre</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>         <span class=nn>schema</span><span class=p>:</span><span class=nt>actor</span> <span class=nv>?actors</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=err>VALUES</span> <span class=nv>?animeColClasses</span> <span class=p>{</span><span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVRegularSeries</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVSpecialSeries</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationMovieSeries</span><span class=p>}</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=k>FILTER</span><span class=p>(</span><span class=nf>LANG</span><span class=p>(</span><span class=nv>?seriesName</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>  <span class=c># タイトルがキャラクター名と同じ</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>  <span class=k>FILTER</span><span class=p>(</span><span class=nf>REGEX</span><span class=p>(</span><span class=nv>?actors</span><span class=p>,</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s>&#34;【&#34;</span><span class=p>,</span> <span class=nv>?seriesName</span> <span class=p>,</span><span class=s>&#34;】&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=p>}</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","登場キャラクター名がタイトルであるアニメ",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class: \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e
SELECT
	?series ?genre ?seriesName ?actors
WHERE {
  ?series a ?animeColClasses ;
         schema:name ?seriesName ;
         schema:genre ?genre ;
         schema:actor ?actors .
  VALUES ?animeColClasses {class:AnimationTVRegularSeries class:AnimationTVSpecialSeries class:AnimationMovieSeries}
  FILTER(LANG(?seriesName) = \u0022\u0022)
  # タイトルがキャラクター名と同じ
  FILTER(REGEX(?actors, CONCAT(\u0022【\u0022, ?seriesName ,\u0022】\u0022)))
}`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a><h3 id=anime-staff-name>新海誠さんの参加作品を取得する
<a class=anchor href=#anime-staff-name>#</a></h3><p><code>schema:contributor</code> の値として以下のような形式で記述されていることを利用し、正規表現を用いて検索します。</p><pre tabindex=0><code>[役割名]スタッフ名 ／ [役割名]スタッフ名 ...
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-sparql data-lang=sparql><span class=line><span class=ln> 1</span><span class=cl><span class=k>PREFIX</span> <span class=nn>schema</span><span class=p>:</span> <span class=nl>&lt;https://schema.org/&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdf</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=k>PREFIX</span> <span class=nn>rdfs</span><span class=p>:</span> <span class=nl>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=k>PREFIX</span> <span class=nn>class</span><span class=p>:</span> <span class=nl>&lt;https://mediaarts-db.bunka.go.jp/data/class#&gt;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=k>SELECT</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>	<span class=nv>?series</span> <span class=nv>?seriesName</span> <span class=p>(</span><span class=nf>GROUP_CONCAT</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=nv>?role</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?roles</span><span class=p>)</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=k>WHERE</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=nv>?series</span> <span class=k>a</span> <span class=nv>?animeColClasses</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>         <span class=nn>schema</span><span class=p>:</span><span class=nt>name</span> <span class=nv>?seriesName</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>         <span class=nn>schema</span><span class=p>:</span><span class=nt>genre</span> <span class=nv>?genre</span> <span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>         <span class=p>^</span><span class=nn>schema</span><span class=p>:</span><span class=nt>isPartOf</span> <span class=nv>?item</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=err>VALUES</span> <span class=nv>?animeColClasses</span> <span class=p>{</span><span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVRegularSeries</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationTVSpecialSeries</span> <span class=nn>class</span><span class=p>:</span><span class=nt>AnimationMovieSeries</span><span class=p>}</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=nv>?series</span> <span class=nn>schema</span><span class=p>:</span><span class=nt>contributor</span> <span class=nv>?contributers</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>  <span class=p>}</span> <span class=k>UNION</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nv>?item</span> <span class=nn>schema</span><span class=p>:</span><span class=nt>contributor</span> <span class=nv>?contributers</span> <span class=p>.</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>  <span class=k>FILTER</span><span class=p>(</span><span class=nf>LANG</span><span class=p>(</span><span class=nv>?seriesName</span><span class=p>)</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>  <span class=k>FILTER</span><span class=p>(</span><span class=nf>REGEX</span><span class=p>(</span><span class=nv>?contributers</span><span class=p>,</span> <span class=s>&#34;新海[\</span><span class=se>\</span><span class=s>s　]*誠&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>  <span class=c># 役割名だけを抽出する</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>  <span class=k>BIND</span><span class=p>(</span><span class=nf>REPLACE</span><span class=p>(</span><span class=nv>?contributers</span><span class=p>,</span> <span class=s>&#34;.*\</span><span class=se>\</span><span class=s>[(.+?)\</span><span class=se>\</span><span class=s>]新海[\</span><span class=se>\</span><span class=s>s　]*誠.*&#34;</span><span class=p>,</span> <span class=s>&#34;$1&#34;</span><span class=p>)</span> <span class=k>AS</span> <span class=nv>?role</span><span class=p>)</span>
</span></span><span class=line><span class=ln>23</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=k>GROUP BY</span> <span class=nv>?series</span> <span class=nv>?seriesName</span></span></span></code></pre></div><a class=book-btn onclick='setYasguiQuery("madb-lod","新海誠さんの参加作品を取得する",`PREFIX schema: \u003chttps://schema.org/\u003e
PREFIX rdf: \u003chttp://www.w3.org/1999/02/22-rdf-syntax-ns#\u003e
PREFIX rdfs: \u003chttp://www.w3.org/2000/01/rdf-schema#\u003e
PREFIX class: \u003chttps://mediaarts-db.bunka.go.jp/data/class#\u003e

SELECT
	?series ?seriesName (GROUP_CONCAT(DISTINCT ?role) AS ?roles)
WHERE {
  ?series a ?animeColClasses ;
         schema:name ?seriesName ;
         schema:genre ?genre ;
         ^schema:isPartOf ?item .
  VALUES ?animeColClasses {class:AnimationTVRegularSeries class:AnimationTVSpecialSeries class:AnimationMovieSeries}
  {
    ?series schema:contributor ?contributers .
  } UNION {
    ?item schema:contributor ?contributers .
  }
  FILTER(LANG(?seriesName) = \u0022\u0022)
  FILTER(REGEX(?contributers, \u0022新海[\\\\s　]*誠\u0022))
  # 役割名だけを抽出する
  BIND(REPLACE(?contributers, \u0022.*\\\\[(.\u002b?)\\\\]新海[\\\\s　]*誠.*\u0022, \u0022\$1\u0022) AS ?role)
}
GROUP BY ?series ?seriesName`,""),location.href="#yasgui-madb-lod"'>▶ 実行する</a></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/Babibubebon/lodc2022-culture-art/edit/master/content/docs/mediaartsdb.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><hr><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/ style=float:left><img alt=クリエイティブ・コモンズ・ライセンス style=border-width:0;width:88px;height:31px src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a>
<small>By Shohei TOYOTA<br>この作品は<a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>クリエイティブ・コモンズ 表示 - 継承 4.0 国際ライセンス</a>の下に提供されています。</small></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#メディア芸術データベースラボ-madb-lab>メディア芸術データベース・ラボ (MADB Lab)</a></li><li><a href=#query-editor>SPARQLクエリエディタ</a></li><li><a href=#queries>クエリ集</a><ul><li><a href=#aggregate-by-genre>全リソースを種別ごとに集計する</a></li><li><a href=#manga-book>マンガ単行本「鬼滅の刃 1 」の情報を取得する</a></li><li><a href=#manga-book-list>マンガ単行本の一覧を取得する</a></li><li><a href=#manga-book-and-provider>マンガ単行本とその所蔵館の一覧を取得する</a></li><li><a href=#magazine-has-part>マンガ雑誌単号の掲載内容を取得する</a></li><li><a href=#contains-magical-girl>「魔法少女」を含むタイトルを検索する</a></li><li><a href=#contains-mario>「マリオ」が登場する作品のゲームパッケージ</a></li><li><a href=#aggregate-manga-magazine-publisher>発行者毎にマンガ雑誌単号の数を集計する</a></li><li><a href=#aggregate-game-platform>ゲームプラットフォーム毎にゲームパッケージ数を集計する</a></li><li><a href=#aggregate-anime-tv-series>公開年毎にTVアニメシリーズ数を集計する</a></li><li><a href=#anime-tv-series-title-contains-marks>タイトルに「!」「?」を多く含むTVアニメシリーズを取得する</a></li><li><a href=#anime-character-name-title>登場キャラクター名がタイトルであるアニメ</a></li><li><a href=#anime-staff-name>新海誠さんの参加作品を取得する</a></li></ul></li></ul></nav></div></aside></main></body></html>